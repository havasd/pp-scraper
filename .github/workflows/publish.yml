name: Scrapes all defined sites and publishes to pp-data repository.
on:
  schedule:
    - cron: "* 12 * * 1-5"
  workflow_dispatch:

jobs:
  generate:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
    - name: Checkout pp-data repo
      uses: actions/checkout@v4
      with:
        repository: havasd/pp-data
        path: pp-data
    - uses: getsentry/action-setup-venv@v2.1.0
      id: venv
      with:
        python-version: 3.11
        cache-dependency-path: |
          requirements.txt
          requirements-frozen.txt
        install-cmd: pip install -r requirements.txt -c requirements-frozen.txt
    - name: Scrape historical prices
      run: |
        ls -lah .
        ls -lah pp-data
    - name: Push historical prices to pp-data
      run: |
        echo bla2
